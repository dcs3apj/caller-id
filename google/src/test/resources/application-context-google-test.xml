<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="rawPersistenceManagerFactory" class="org.springframework.orm.jdo.LocalPersistenceManagerFactoryBean"
    autowire-candidate="false">
    <property name="jdoProperties">
      <props>
        <prop key="javax.jdo.PersistenceManagerFactoryClass">
          org.datanucleus.api.jdo.JDOPersistenceManagerFactory
        </prop>
        <prop key="javax.jdo.option.ConnectionDriverName">org.hsqldb.jdbcDriver</prop>
        <prop key="javax.jdo.option.ConnectionURL">jdbc:hsqldb:mem:nucleus1</prop>
        <prop key="javax.jdo.option.ConnectionUserName">sa</prop>
        <prop key="javax.jdo.option.ConnectionPassword"></prop>
        <prop key="datanucleus.autoCreateSchema">true</prop>
        <prop key="datanucleus.validateTables">false</prop>
        <prop key="datanucleus.validateConstraints">false</prop>
      </props>
    </property>
  </bean>

  <bean id="persistenceManagerFactory" class="org.springframework.orm.jdo.TransactionAwarePersistenceManagerFactoryProxy">
    <property name="targetPersistenceManagerFactory" ref="rawPersistenceManagerFactory" />
  </bean>

  <bean id="transactionManager" class="org.springframework.orm.jdo.JdoTransactionManager">
    <property name="persistenceManagerFactory" ref="rawPersistenceManagerFactory" />
  </bean>
</beans>
